!function(e){function t(e){var t=e.data("href");t.length>0&&(window.location.href=t)}function n(t,n){var a=e(n),l=r(),c=lynda.searchTrackingData;c.rawSearchId=l,c.isMemberAppliedFilter=i(),c.searchOrigin=o(c),c.filterLevel="ALL",c.filterContentBy="ALL";var d=s(a);null!=d&&(c.results=[d],u.trigger("li.track.action",["LearningSearchImpressionEvent",c,"LyndaSearchImpressionEvent"]))}function a(e,t,n){var a=t.data("trackingId"),i=r(),o=e.data("urn");"undefined"==typeof o&&(o=t.data("urn")),u.trigger("li.track.action",["LearningSearchActionEvent",{actionType:n,rawSearchId:i,result:{objectUrn:o,trackingId:a}},"LyndaSearchActionEvent"])}function r(){var e=null;return"undefined"!=typeof window.sessionStorage&&(e=window.sessionStorage.getItem("rawSearchId")),"undefined"!=typeof e&&null!==e||(e=generateSearchId()),e}function i(){var e=!1;if("undefined"!=typeof window.sessionStorage){var t=window.sessionStorage.getItem("searchFilterApplied");"undefined"!=typeof t&&null!==t&&(e="true"==t)}return e}function o(e){return e.isMemberAppliedFilter?"FILTER_SEARCH":"GLOBAL_SEARCH_HEADER"}function s(e,t){var n=lynda.generateTrackingId(),a=e.data("urn"),r=t||e.data("position"),i=e.data("result-type");if("undefined"==typeof a||"undefined"==typeof r||"undefined"==typeof i)return null;e.data("trackingId",n);var o={learningResult:{resultObject:{trackingId:n,objectUrn:a},resultType:i,position:{index:r}},startTime:0,duration:0,size:{width:0,height:0}};return o}function l(e,t,n,a){n&&!t?(a.addClass("opened"),e.addClass("opened")):n&&t&&(a.removeClass("opened"),e.removeClass("opened show-pointer"))}function c(t,n){if(v&&v.length){var a=e("<div>",{"class":"carousel-container empty-carousel"}),r=e(a).text(v);e(t).addClass("show-pointer"),n.after(e(t).append(r)),t.length&&n.length&&l(t,!1,a,n)}}function d(){return window.location.search.match(new RegExp("q=(.*?)($|&)","i"))[1]}function h(){window.innerWidth>1023&&g.hasClass("show-search")&&g.removeClass("show-search")}var u=e("body"),f=e(window),g=e("header"),p=e("#header-search-field"),v=lynda.translate("There are no related courses available."),w=e("#search-results"),m=e("#search-results-list"),y=e(".filter-set"),k=e(".active-filters");window.innerWidth<1024&&u.addClass("show-search"),u.tooltip({container:"body",selector:".action-playlist",placement:"top",template:'<div class="tooltip no-touch-tooltips" role="tooltip"><div class="tooltip-arrow"></div><div class="tooltip-inner"></div></div>'}),p.on("autocomplete.submit",function(t){var n=e(this).val();0!==n.length&&u.trigger("search.refresh.results",[n])}),u.on("click","#site-search-submit",function(e){var t=p.val();0!==t.length&&u.trigger("search.refresh.results",[t])}),e(".btn-course-link").on("click",function(t){t.preventDefault();var n=e(this).data("href");n.length>0&&(window.location.href=n)}),u.on("click",".card",function(t){(e(t.target).parent().is(".video-launch")||e(t.target).is(".watch-options"))&&t.preventDefault()}),u.on("search.refresh.results",function(e,t){if(t||(t=d()),t){var n="/search?q="+encodeURIComponent(t).replace(/%20/g,"+");n.length>0&&(window.location.href=n)}}),w.on("click",".card-redirect",function(n){if(!e(n.target).is("button")&&!e(n.target).parent().is("button")){var a=e(this);t(a)}}),w.on("keypress",".card-redirect",function(n){var a=n.keyCode?n.keyCode:n.which;if(13===a){var r=e(this);t(r)}}),w.on("click",".card.author .meta-description a, .card.learning-path .meta-description a, .card-meta-data a",function(e){e.stopPropagation()}),w.on("click",".show-more",function(t){var r=e(this),i=r.data("url")||"";r.hasClass("loading")||(r.addClass("loading"),e.get("ajax/search"+i).done(function(t){if(t&&t.html&&t.html.length){e(".card a.first-hidden").removeClass("first-hidden");var r=t.html;e(".show-more-container").remove(),m.append(r),w.append(t.paginationHtml),u.trigger("lazy.init"),u.trigger("playlist.control.init"),e(".truncated-list").each(function(t,n){var a=e(n),r=a.find(".show-more-toggle"),i=null!=a.data("filterMax")?a.data("filterMax"):3;!r.length&&a.find("li").length>i&&u.trigger("init-truncated-list",n)}),m.find(".card a.first-hidden").first().focus(),e("[data-track-impression]").appear(function(){var t=e(this);t.attr("tracked")||(t.attr("tracked",!0),n(null,t))}),e("#search-results-list .card").on("click",function(t){var n=e(t.target);if(!n.hasClass("related-courses")&&!n.hasClass("playlist-status-icon")){var r=e(this).closest("li");a(n,r,lynda.searchTrackingActionTypes.VIEW)}})}}))}),u.on("click",".related-courses",function(t){t.preventDefault();var n=e(this),a=n.find("i"),r=n.parents(".card-cont"),i=r.find(".search-result"),o=r.find(".related-carousel-cont"),s=o.find(".carousel-container"),d=a.toggleClass("arrow-up").hasClass("arrow-up");if(n.hasClass("loaded")||n.hasClass("loading"))o.length&&s.length&&i.length&&(l(o,!d,s,i),d&&u.trigger("search.track.re.impression",{activeElements:s.find(".scrolly [data-active=1]")}));else{n.addClass("loading");var h,f=n.data("courseId"),g=e("<div>",{"class":"related-carousel-cont hidden-xs"});e.get("ajax/search/similarcourse/"+f+"/9/0").done(function(t){if(t&&t.html&&t.html.length){i.after(e(g).html(t.html)),u.trigger("lazy.init"),u.trigger("scrolly.init",g.find(".scrolly")),u.trigger("playlist.control.init"),h=e(g).find(".carousel-container");var a="carousel: "+n.data("gaLabel");u.trigger("li.track.impression",a),g.length&&h.length&&i.length&&l(g,!1,h,i)}else c(g,i)}).fail(function(){c(g,i)}).always(function(){n.addClass("loaded").removeClass("loading")})}}),w.on("webkitTransitionEnd otransitionend oTransitionEnd msTransitionEnd transitionend",".related-carousel-cont",function(t){var n=e(t.currentTarget);n.length&&n.hasClass("opened")&&n.addClass("show-pointer")}),y.on("click",".filter",function(e){e.preventDefault(),u.trigger("search.track.filter.click")}),k.on("click",".filter-remove",function(e){u.trigger("search.track.filter.clickremove",[this.href])}),y.on("click","ul li:not(.show-more-toggle)",function(t){var n=e(this),a=n.children(".filter"),r=a.attr("href");r.length&&(window.location.href=r)}),f.resize(_.debounce(h,150))}(jQuery);